#!/usr/bin/env Rscript

#------------------------------------------------------------------------------------------
# load packages
#------------------------------------------------------------------------------------------
library(RestRserve)
#------------------------------------------------------------------------------------------
# create handler for the HTTP requests
#------------------------------------------------------------------------------------------
hello = function(request, response) {
  response$body = "Hello, World!"
  response$content_type = "text/plain"
  response$status_code = 200L
  response$serializer = identity
}
#------------------------------------------------------------------------------------------
# create application
#------------------------------------------------------------------------------------------
app = RestRserveApplication$new(
  content_type = "text/plain",
  serializer = identity
)
#------------------------------------------------------------------------------------------
# register endpoints and corresponding R handlers
#------------------------------------------------------------------------------------------
app$add_get(path = "/hello", FUN = hello, match = "exact")
#------------------------------------------------------------------------------------------
# start application
#------------------------------------------------------------------------------------------
app$run(http_port = 8001)
