<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Middleware • RestRserve</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Middleware">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RestRserve</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/RestRserve.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Authentication.html">Authentication</a>
    </li>
    <li>
      <a href="../articles/benchmarks/Benchmarks.html">Benchmarks</a>
    </li>
    <li>
      <a href="../articles/ContentHandlers.html">Body encoding and decoding</a>
    </li>
    <li>
      <a href="../articles/Logging.html">Logging</a>
    </li>
    <li>
      <a href="../articles/Middleware.html">Middleware</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rexyai/RestRserve/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Middleware</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rexyai/RestRserve/blob/master/vignettes/Middleware.Rmd" class="external-link"><code>vignettes/Middleware.Rmd</code></a></small>
      <div class="hidden name"><code>Middleware.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="middleware">Middleware<a class="anchor" aria-label="anchor" href="#middleware"></a>
</h2>
<p>Many web API frameworks contain a concept called “middleware” (but
every language/framework calls it differently - filters, middleware,
etc). Essentially, the middleware performs some specific function on the
HTTP request or response before or after the handler. Common tasks to
offload to a middleware would be logging, authorization, body
compression, etc.</p>
<p><code>RestRserve</code> comes with several build-in middlewares
(<code>AuthMiddleware</code>, <code>CORSMiddleware</code>,
<code>ETagMiddleware</code>) and generic <code>Middleware</code> class
which facilitates user to create a custom middleware.</p>
<p>Let’s see it in action in example below.</p>
</div>
<div class="section level2">
<h2 id="logging">Logging<a class="anchor" aria-label="anchor" href="#logging"></a>
</h2>
<p>Let’s say you have a simple app which has only a single endpoint - it
simply convert query string parameters into a JSON format and sends it
back:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://restrserve.org">RestRserve</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">=</span> <span class="va"><a href="../reference/Application.html">Application</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>content_type <span class="op">=</span> <span class="st">"application/json"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">backend</span> <span class="op">=</span> <span class="va"><a href="../reference/BackendRserve.html">BackendRserve</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span><span class="op">$</span><span class="fu">add_get</span><span class="op">(</span><span class="st">"/foo"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">.req</span>, <span class="va">.res</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">body</span> <span class="op">=</span> <span class="fu">RestRserve</span><span class="fu">::</span><span class="fu"><a href="../reference/to_json.html">to_json</a></span><span class="op">(</span><span class="va">.req</span><span class="op">$</span><span class="va">parameters_query</span><span class="op">)</span></span>
<span>  <span class="va">.res</span><span class="op">$</span><span class="fu">set_body</span><span class="op">(</span><span class="va">body</span><span class="op">)</span></span>
<span>  <span class="co"># specify that there is no need to specially encode the body as</span></span>
<span>  <span class="co"># we've already set it to a JSON</span></span>
<span>  <span class="va">.res</span><span class="op">$</span><span class="va">encode</span> <span class="op">=</span> <span class="va">identity</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>See it in action:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">req</span> <span class="op">=</span> <span class="va"><a href="../reference/Request.html">Request</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/foo"</span>, method <span class="op">=</span> <span class="st">"GET"</span>, parameters_query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>key1 <span class="op">=</span> <span class="st">"value1"</span>, key2 <span class="op">=</span> <span class="st">"value2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">=</span> <span class="va">app</span><span class="op">$</span><span class="fu">process_request</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span>
<span><span class="va">resp</span><span class="op">$</span><span class="va">body</span></span>
<span><span class="co">#&gt; [1] "{\"key1\":\"value1\",\"key2\":\"value2\"}"</span></span></code></pre></div>
<p>Assume you would like to analyze how your web service works. For that
you may need log every request and response in order to see whether
service replies with errors and what can cause these errors. This is a
perfect task for a middleware and here is how you can achieve this with
<code>RestRserve</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logging_middleware</span> <span class="op">=</span> <span class="va"><a href="../reference/Middleware.html">Middleware</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  process_request <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">.req</span>, <span class="va">.res</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      middleware <span class="op">=</span> <span class="st">"logging_middleware"</span>,</span>
<span>      request_id <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">id</span>,</span>
<span>      request <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>headers <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">headers</span>, method <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">method</span>, path <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">path</span><span class="op">)</span>, </span>
<span>      timestamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu">RestRserve</span><span class="fu">::</span><span class="fu"><a href="../reference/to_json.html">to_json</a></span><span class="op">(</span><span class="va">msg</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">msg</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  process_response <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">.req</span>, <span class="va">.res</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      middleware <span class="op">=</span> <span class="st">"logging_middleware"</span>,</span>
<span>      <span class="co"># we would like to have a request_id for each response in order to correlate</span></span>
<span>      <span class="co"># request and response</span></span>
<span>      request_id <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">id</span>,</span>
<span>      response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>headers <span class="op">=</span> <span class="va">.res</span><span class="op">$</span><span class="va">headers</span>, status_code <span class="op">=</span> <span class="va">.res</span><span class="op">$</span><span class="va">status_code</span>, body <span class="op">=</span> <span class="va">.res</span><span class="op">$</span><span class="va">body</span><span class="op">)</span>,</span>
<span>      timestamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="../reference/to_json.html">to_json</a></span><span class="op">(</span><span class="va">msg</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">msg</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"logging"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span><span class="op">$</span><span class="fu">append_middleware</span><span class="op">(</span><span class="va">logging_middleware</span><span class="op">)</span></span></code></pre></div>
<p>Let’s test again:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">req</span> <span class="op">=</span> <span class="va"><a href="../reference/Request.html">Request</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/foo"</span>, method <span class="op">=</span> <span class="st">"GET"</span>, parameters_query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>key1 <span class="op">=</span> <span class="st">"value1"</span>, key2 <span class="op">=</span> <span class="st">"value2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">=</span> <span class="va">app</span><span class="op">$</span><span class="fu">process_request</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"middleware":"logging_middleware","request_id":"fb11bb16-03bd-11f0-bf8a-129e97996b15","request":{"headers":{},"method":"GET","path":"/foo"},"timestamp":"2025-03-18 05:58:14"}</span></span>
<span><span class="co">#&gt; {"middleware":"logging_middleware","request_id":"fb11bb16-03bd-11f0-bf8a-129e97996b15","response":{"headers":{"Server":"RestRserve/1.2.4; Rserve/1.8.15"},"status_code":200,"body":"{\"key1\":\"value1\",\"key2\":\"value2\"}"},"timestamp":"2025-03-18 05:58:14"}</span></span></code></pre></div>
<p>Let’s see what will happen if we will send request to nonexistent
endpoint:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">req</span> <span class="op">=</span> <span class="va"><a href="../reference/Request.html">Request</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/foo2"</span>, method <span class="op">=</span> <span class="st">"GET"</span>, parameters_query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>key1 <span class="op">=</span> <span class="st">"value1"</span>, key2 <span class="op">=</span> <span class="st">"value2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">=</span> <span class="va">app</span><span class="op">$</span><span class="fu">process_request</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"middleware":"logging_middleware","request_id":"fb1d2a14-03bd-11f0-bf8a-129e97996b15","request":{"headers":{},"method":"GET","path":"/foo2"},"timestamp":"2025-03-18 05:58:14"}</span></span>
<span><span class="co">#&gt; {"middleware":"logging_middleware","request_id":"fb1d2a14-03bd-11f0-bf8a-129e97996b15","response":{"headers":{"Server":"RestRserve/1.2.4; Rserve/1.8.15"},"status_code":404,"body":"404 Not Found"},"timestamp":"2025-03-18 05:58:14"}</span></span></code></pre></div>
<p>Later you will see all the responses with errors in the log
(<code>status_code</code> &gt;= 400). Also you will be able to find
corresponding requests by inspecting <code>request_id</code> field.</p>
</div>
<div class="section level2">
<h2 id="middleware-order">Middleware order<a class="anchor" aria-label="anchor" href="#middleware-order"></a>
</h2>
<p>It is important to understand that middlewares are executed in order
you’ve added them (that’s why it is called
<code>append_middleware</code>). Flow is shown on the diagram below.</p>
<p><img src="img%2Fmiddleware-order.png" width="320"></p>
</div>
<div class="section level2">
<h2 id="compression">Compression<a class="anchor" aria-label="anchor" href="#compression"></a>
</h2>
<p>To demonstrate the order in which middleware called let’s consider
another example.</p>
<p>Sometimes it it useful to compress response body in order to send
less data over the wire. Here we will implement a middleware which will
compress response with <code>gzip</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gzip_middleware</span> <span class="op">=</span> <span class="va"><a href="../reference/Middleware.html">Middleware</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  process_request <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">.req</span>, <span class="va">.res</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      middleware <span class="op">=</span> <span class="st">"gzip_middleware"</span>,</span>
<span>      request_id <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">id</span>,</span>
<span>      timestamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="../reference/to_json.html">to_json</a></span><span class="op">(</span><span class="va">msg</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">msg</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  process_response <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">.req</span>, <span class="va">.res</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="co"># compress body</span></span>
<span>    <span class="va">.res</span><span class="op">$</span><span class="fu">set_header</span><span class="op">(</span><span class="st">"Content-encoding"</span>, <span class="st">"gzip"</span><span class="op">)</span></span>
<span>    <span class="va">.res</span><span class="op">$</span><span class="fu">set_body</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/memCompress.html" class="external-link">memCompress</a></span><span class="op">(</span><span class="va">.res</span><span class="op">$</span><span class="va">body</span>, <span class="st">"gzip"</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      middleware <span class="op">=</span> <span class="st">"gzip_middleware"</span>,</span>
<span>      request_id <span class="op">=</span> <span class="va">.req</span><span class="op">$</span><span class="va">id</span>,</span>
<span>      timestamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">msg</span> <span class="op">=</span> <span class="fu"><a href="../reference/to_json.html">to_json</a></span><span class="op">(</span><span class="va">msg</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">msg</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"gzip"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">app</span><span class="op">$</span><span class="fu">append_middleware</span><span class="op">(</span><span class="va">gzip_middleware</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">req</span> <span class="op">=</span> <span class="va"><a href="../reference/Request.html">Request</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"/foo"</span>, method <span class="op">=</span> <span class="st">"GET"</span>, parameters_query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>key1 <span class="op">=</span> <span class="st">"value1"</span>, key2 <span class="op">=</span> <span class="st">"value2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">=</span> <span class="va">app</span><span class="op">$</span><span class="fu">process_request</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"middleware":"logging_middleware","request_id":"fb2c16be-03bd-11f0-bf8a-129e97996b15","request":{"headers":{},"method":"GET","path":"/foo"},"timestamp":"2025-03-18 05:58:14"}</span></span>
<span><span class="co">#&gt; {"middleware":"gzip_middleware","request_id":"fb2c16be-03bd-11f0-bf8a-129e97996b15","timestamp":"2025-03-18 05:58:14"}</span></span>
<span><span class="co">#&gt; {"middleware":"gzip_middleware","request_id":"fb2c16be-03bd-11f0-bf8a-129e97996b15","timestamp":"2025-03-18 05:58:14"}</span></span>
<span><span class="co">#&gt; {"middleware":"logging_middleware","request_id":"fb2c16be-03bd-11f0-bf8a-129e97996b15","response":{"headers":{"Server":"RestRserve/1.2.4; Rserve/1.8.15","Content-encoding":"gzip"},"status_code":200,"body":"eJyrVspOrTRUslIqS8wpTTVU0gHxjWB8I6VaAK3KCjs="},"timestamp":"2025-03-18 05:58:14"}</span></span></code></pre></div>
<p>And now check what is actual decoded response body:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">rawToChar</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/memCompress.html" class="external-link">memDecompress</a></span><span class="op">(</span><span class="va">resp</span><span class="op">$</span><span class="va">body</span>, <span class="st">"gzip"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "{\"key1\":\"value1\",\"key2\":\"value2\"}"</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dmitry Selivanov, Artem Klevtsov, <a href="https://rexy.ai" class="external-link"></a><a href="https://rexy.ai" class="external-link"><img src="https://s3-eu-west-1.amazonaws.com/rexy.ai/images/rexy-logo.svg" height="32" alt="rexy.ai"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
